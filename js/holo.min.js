var HOLO={Revision:0};HOLO.FourSidedDisplay=function(t){this.cameraDistance=1e3,this.reflectFromAbove=!0,this._renderer=t,this._cameraF=new THREE.PerspectiveCamera,this._cameraB=new THREE.PerspectiveCamera,this._cameraL=new THREE.PerspectiveCamera,this._cameraR=new THREE.PerspectiveCamera,this._position=new THREE.Vector3,this._quaternion=new THREE.Quaternion,this._scale=new THREE.Vector3,this._renderer.autoClear=!1},HOLO.FourSidedDisplay.prototype={constructor:HOLO.FourSidedDisplay,setSize:function(t,e){t<e?(this._startX=0,this._startY=(e-t)/2,this._width=t/3,this._height=t/3):(this._startX=(t-e)/2,this._startY=0,this._width=e/3,this._height=e/3),this._renderer.setSize(t,e)},render:function(t,e){this.cameraDistance=e.far/2,t.updateMatrixWorld(),this._setCameras(e),this._setScissors()},_setCameras:function(t){null===t.parent&&t.updateMatrixWorld(),t.matrixWorld.decompose(this._position,this._quaternion,this._scale);var e=new THREE.Vector3(0,0,(-this.cameraDistance)).applyQuaternion(this._quaternion).round().add(this._position),i=new THREE.Vector3(0,0,(-this.cameraDistance)).applyQuaternion(this._quaternion).round().add(this._center),s=new THREE.Vector3((-this.cameraDistance),0,0).applyQuaternion(this._quaternion).round().add(this._center),n=new THREE.Vector3(this.cameraDistance,0,0).applyQuaternion(_quaternion).round().add(e),o=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(1,0,0),Math.PI/2),r=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(1,0,0),Math.PI),a=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),Math.PI/2),h=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),-Math.PI/2),c=(new THREE.Quaternion).copy(_quaternion).multiply(o).multiply(a),_=(new THREE.Quaternion).copy(_quaternion).multiply(r),p=(new THREE.Quaternion).copy(_quaternion).multiply(o).multiply(h);this._cameraF.position.copy(this._position),this._cameraF.quaternion.copy(this._quaternion),this._cameraF.far=t.far,this._cameraR.position.copy(n),this._cameraR.quaternion.copy(c),this._cameraR.far=t.far,this._cameraB.position.copy(i),this._cameraB.quaternion.copy(_),this._cameraB.far=t.far,this._cameraL.position.copy(s),this._cameraL.quaternion.copy(p),this._cameraL.far=t.far},_setScissors:function(){this._renderer.clear(),this._renderer.setScissorTest(!0),this._renderer.setScissor(this._startX+this._width,this._startY+2*this._height,this._width,this._height),this._renderer.setViewport(this._startX+this._width,this._startY+2*this._height,this._width,this._height),this.reflectFromAbove?this._renderer.render(scene,this._cameraB):this._renderer.render(scene,this._cameraF),this._renderer.setScissor(this._startX+this._width,this._startY,this._width,this._height),this._renderer.setViewport(this._startX+this._width,this._startY,this._width,this._height),this.reflectFromAbove?this._renderer.render(scene,this._cameraF):this._renderer.render(scene,this._cameraB),this._renderer.setScissor(this._startX,this._startY+this._height,this._width,this._height),this._renderer.setViewport(this._startX,this._startY+this._height,this._width,this._height),this.reflectFromAbove?this._renderer.render(scene,this._cameraR):this._renderer.render(scene,this._cameraL),this._renderer.setScissor(this._startX+2*this._width,this._startY+this._height,this._width,this._height),this._renderer.setViewport(this._startX+2*this._width,this._startY+this._height,this._width,this._height),this.reflectFromAbove?this._renderer.render(scene,this._cameraL):this._renderer.render(scene,this._cameraR),this._renderer.setScissorTest(!1)}},HOLO.ThreeSidedDisplay=function(t){this.cameraDistance=1e3,this.reflectFromAbove=!0;var e,i,s,n,o=new THREE.PerspectiveCamera,r=new THREE.PerspectiveCamera,a=new THREE.PerspectiveCamera,h=new THREE.Vector3,c=new THREE.Quaternion,_=new THREE.Vector3;t.autoClear=!1,this.setSize=function(o,r){o<r?(e=o/2,i=o/2,s=0,n=(r-3*i)/2):(i=r/2,e=r/2,s=(o-3*e)/2,n=0),t.setSize(o,r)},this.render=function(t,e){this.cameraDistance=e.far/2,t.updateMatrixWorld(),this._setCameras(e),this._setScissors()},this._setCameras=function(t){null===t.parent&&t.updateMatrixWorld(),t.matrixWorld.decompose(h,c,_);var e=new THREE.Vector3(0,0,(-this.cameraDistance)).applyQuaternion(c).round().add(h),i=new THREE.Vector3((-this.cameraDistance),0,0).applyQuaternion(c).round().add(e),s=new THREE.Vector3(this.cameraDistance,0,0).applyQuaternion(c).round().add(e),n=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(1,0,0),Math.PI/2),p=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),Math.PI/2),u=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),-Math.PI/2),d=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,0,1),Math.PI),l=(new THREE.Quaternion).copy(c).multiply(n).multiply(p),m=(new THREE.Quaternion).copy(c).multiply(n).multiply(u);o.position.copy(h),this.reflectFromAbove?o.quaternion.copy(c.multiply(d)):o.quaternion.copy(c),o.far=t.far,a.position.copy(s),a.quaternion.copy(l),a.far=t.far,r.position.copy(i),r.quaternion.copy(m),r.far=t.far},this._setScissors=function(){t.clear(),t.setScissorTest(!0),this.reflectFromAbove?(t.setScissor(s+e,n+i,e,i),t.setViewport(s+e,n+i,e,i),t.render(scene,o),t.setScissor(s,n,e,i),t.setViewport(s,n,e,i),t.render(scene,a),t.setScissor(s+2*e,n,e,i),t.setViewport(s+2*e,n,e,i),t.render(scene,r)):(t.setScissor(s+i,n,e,i),t.setViewport(s+i,n,e,i),t.render(scene,o),t.setScissor(s,n+i,i,e),t.setViewport(s,n+i,i,e),t.render(scene,r),t.setScissor(s+i+e,n+i,i,e),t.setViewport(s+i+e,n+i,i,e),t.render(scene,a)),t.setScissorTest(!1)}},HOLO.Animator=function(){this._animations=[]},HOLO.Animator.prototype={constructor:HOLO.Animator,get isEmpty(){return this._animations.length<1},add:function(t){this._animations.push(t)},remove:function(t){var e=this._animations.indexOf(t);e>-1&&this._animations.splice(e,1)},clear:function(){this._animations=[]},contains:function(t){return this._animations.indexOf(t)>-1},animate:function(){for(var t=0;t<this._animations.length;t++)this._animations[t].animate(),this._animations[t].finished&&this.remove(this._animations[t])}},HOLO.ChangeLocationAnimation=function(t,e,i){if(this._object=t,this._steps=i,e.constructor===Array)this._calcSteps(new THREE.Vector3(e[0],e[1],e[2]));else{if(!e.isVector3)throw new Error("Object is not an array or vector: ");this._calcSteps(e)}},HOLO.ChangeLocationAnimation.prototype={constructor:HOLO.ChangeLocationAnimation,get finished(){return this._steps<1},_calcSteps:function(t){this._changeX=(t.x-this._object.position.x)/this._steps,this._changeY=(t.y-this._object.position.y)/this._steps,this._changeZ=(t.z-this._object.position.z)/this._steps},_lerp:function(){this._object.position.x+=this._changeX,this._object.position.y+=this._changeY,this._object.position.z+=this._changeZ,this._steps-=1},animate:function(){this._lerp()}},HOLO.ChangeRotationAnimation=function(t,e,i){if(this._object=t,this._steps=i,e.constructor===Array)this._calcSteps(new THREE.Vector3(e[0],e[1],e[2]));else{if(!e.isVector3)throw new Error("Object is not an array or vector: ");this._calcSteps(e)}},HOLO.ChangeRotationAnimation.prototype={constructor:HOLO.ChangeRotationAnimation,get finished(){return this._steps<1},_calcSteps:function(t){this._changeX=t.x/this._steps,this._changeY=t.y/this._steps,this._changeZ=t.z/this._steps},_lerp:function(){this._object.rotation.x+=this._changeX,this._object.rotation.y+=this._changeY,this._object.rotation.z+=this._changeZ,this._steps-=1},animate:function(){this._lerp()}},HOLO.ChangeScaleAnimation=function(t,e,i){if(this._object=t,this._steps=i,e.constructor===Array)this._scale=new THREE.Vector3(e[0],e[1],e[2]);else if(e.isVector3)this._scale=e;else{if("number"!=typeof e)throw new Error("Object is not an array or vector: ");this._scale=new THREE.Vector3(e,e,e)}this._calcSteps(this._scale)},HOLO.ChangeScaleAnimation.prototype={constructor:HOLO.ChangeScaleAnimation,get finished(){return this._steps<1},_calcSteps:function(t){this._changeX=Math.abs(Math.sin(this._steps*t.x)),this._changeY=Math.abs(Math.sin(this._steps*t.y)),this._changeZ=Math.abs(Math.sin(this._steps*t.z))},_lerp:function(){this._object.scale.set(this._changeX,this._changeY,this._changeZ),this._steps-=1},animate:function(){this._lerp()}},HOLO.RotationAnimation=function(t,e,i){this._object=t,this._steps=1,this.alpha=e,this.rotationVector=i},HOLO.RotationAnimation.prototype={constructor:HOLO.RotationAnimation,get alpha(){return this._alpha},set alpha(t){if(void 0!==t&&"number"!=typeof t)throw new Error("Alpha is not a float value.");this._alpha=t||1},get rotationVector(){return this._rotationVector},set rotationVector(t){if(t.constructor===Array)this._rotationVector=new THREE.Vector3(t[0],t[1],t[2]);else{if(!t.isVector3)throw new Error("Object is not an array or vector: ");this._rotationVector=t}},get finished(){return this._steps<1},start:function(){this._steps=1},stop:function(){this._steps=0},_lerp:function(){this._object.rotation.x+=this._rotationVector.x*this._alpha,this._object.rotation.y+=this._rotationVector.y*this._alpha,this._object.rotation.z+=this._rotationVector.z*this._alpha},animate:function(){this._lerp()}},HOLO.ModelLoader=function(){},HOLO.ModelLoader.prototype={constructor:HOLO.ModelLoader},HOLO.Cube=function(t,e,i,s,n,o){THREE.Group.call(this),this.type="Group",this._inside=[],this.autoScale=!0,this._width=t||200,this._height=e||200,this._depth=i||200,this._color=s||6750003,this._transparent=n||!0,this._oppacity=o||.5,this._cubeGeometry=new THREE.CubeGeometry(this._width,this._height,this._depth),this._cubeMaterials=[new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide})],this._cubeFaceMaterial=new THREE.MeshFaceMaterial(this._cubeMaterials),this._cubeMesh=new THREE.Mesh(this._cubeGeometry,this._cubeFaceMaterial),this.add(this._cubeMesh),this._cubeGeometry.computeBoundingBox(),this.boundingBox=this._cubeGeometry.boundingBox},HOLO.Cube.prototype=Object.assign(Object.create(THREE.Group.prototype),{constructor:HOLO.Cube,addToCube:function(t){if(this.autoScale)if(this._fit(t),this._inside.push(t),this._inside.length>1){this.children=this.children.slice(0,1),this._computeSpacing();for(var e=0,i=0;i<this._inside.length;i++)this._inside[i].computeBoundingBox(),e+=this._inside[i].boundingBox.max.y;for(var s,n=this._objectSpace/e,o=+this.boundingBox.max.y/2,i=0;i<this._inside.length;i++)s=this._inside[i].clone(),e>this.boundingBox.max.y&&s.scale.set(n,n,n),s.position.set(0,o,0),this.add(s),s.computeBoundingBox(),o-=s.boundingBox.max.y+this._singleSpacing}else this.add(t);else this.add(t)},_fit:function(t){t.computeBoundingBox();var e;t.boundingBox.max.x>this.boundingBox.max.x&&(e=this.boundingBox.max.x/t.boundingBox.max.x,t.scale.set(e,e,e)),t.boundingBox.max.y>this.boundingBox.max.y&&(e=this.boundingBox.max.y/t.boundingBox.max.y,t.scale.set(e,e,e)),t.boundingBox.max.z>this.boundingBox.max.z&&(e=this.boundingBox.max.z/t.boundingBox.max.z,t.scale.set(e,e,e))},_computeSpacing:function(){this._totalSpacing=this.boundingBox.max.y/this._inside.length+1,this._singleSpacing=this._totalSpacing/this._inside.length-1,this._objectSpace=this.boundingBox.max.y-this._totalSpacing},set color(t){for(var e=0;e<this._cubeGeometry.faces.length;e++)this._cubeGeometry.faces[e].color=t;this._cubeGeometry.colorsNeedUpdate=!0},get color(){return new THREE.Color(this._color)}}),HOLO.Model=function(t,e){THREE.Mesh.call(this,t,e),this.type="Mesh"},HOLO.Model.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:HOLO.Model,computeBoundingBox:function(){this.geometry.computeBoundingBox(),this.boundingBox=this.geometry.boundingBox}}),HOLO.Text=function(t,e,i,s,n){this._font=t,this._text=e||"HoloJen",this._textSize=i||80,this._textHeight=s||20,this._curveSegments=n||2,this._textGeometry=new THREE.TextGeometry(this._text,{font:this._font,size:this._textSize,height:this._textHeight,curveSegments:this._curveSegments}),this._textGeometry.center(),this._textMaterial=new THREE.MultiMaterial([new THREE.MeshBasicMaterial({color:4873318,overdraw:.5}),new THREE.MeshBasicMaterial({color:16777215,overdraw:.5})]),THREE.Mesh.call(this,this._textGeometry,this._textMaterial),this.type="Mesh"},HOLO.Text.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:HOLO.Text,computeBoundingBox:function(){this._textGeometry.computeBoundingBox(),this.boundingBox=this._textGeometry.boundingBox},clone:function(){return new this.constructor(this._font,this._text).copy(this)}});