var HOLO={Revision:0};HOLO.FourSidedDisplay=function(t){this.cameraDistance=1e3,this.reflectFromAbove=!0;var e,i,o,n,s=new THREE.PerspectiveCamera,r=new THREE.PerspectiveCamera,a=new THREE.PerspectiveCamera,c=new THREE.PerspectiveCamera,h=new THREE.Vector3,p=new THREE.Quaternion,u=new THREE.Vector3;t.autoClear=!1,this.setSize=function(s,r){s<r?(o=0,n=(r-s)/2,e=s/3,i=s/3):(o=(s-r)/2,n=0,e=r/3,i=r/3),t.setSize(s,r)},this.render=function(t,e){this.cameraDistance=e.far/2,t.updateMatrixWorld(),this._setCameras(e),this._setScissors()},this._setCameras=function(t){null===t.parent&&t.updateMatrixWorld(),t.matrixWorld.decompose(h,p,u);var e=new THREE.Vector3(0,0,(-this.cameraDistance)).applyQuaternion(p).round().add(h),i=new THREE.Vector3(0,0,(-this.cameraDistance)).applyQuaternion(p).round().add(e),o=new THREE.Vector3((-this.cameraDistance),0,0).applyQuaternion(p).round().add(e),n=new THREE.Vector3(this.cameraDistance,0,0).applyQuaternion(p).round().add(e),_=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(1,0,0),Math.PI/2),l=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(1,0,0),Math.PI),E=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),Math.PI/2),d=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),-Math.PI/2),m=(new THREE.Quaternion).copy(p).multiply(_).multiply(E),y=(new THREE.Quaternion).copy(p).multiply(l),g=(new THREE.Quaternion).copy(p).multiply(_).multiply(d);s.position.copy(h),s.quaternion.copy(p),s.far=t.far,c.position.copy(n),c.quaternion.copy(m),c.far=t.far,r.position.copy(i),r.quaternion.copy(y),r.far=t.far,a.position.copy(o),a.quaternion.copy(g),a.far=t.far},this._setScissors=function(){t.clear(),t.setScissorTest(!0),t.setScissor(o+e,n+2*i,e,i),t.setViewport(o+e,n+2*i,e,i),this.reflectFromAbove?t.render(scene,r):t.render(scene,s),t.setScissor(o+e,n,e,i),t.setViewport(o+e,n,e,i),this.reflectFromAbove?t.render(scene,s):t.render(scene,r),t.setScissor(o,n+i,e,i),t.setViewport(o,n+i,e,i),this.reflectFromAbove?t.render(scene,c):t.render(scene,a),t.setScissor(o+2*e,n+i,e,i),t.setViewport(o+2*e,n+i,e,i),this.reflectFromAbove?t.render(scene,a):t.render(scene,c),t.setScissorTest(!1)}},HOLO.ThreeSidedDisplay=function(t){this.cameraDistance=1e3,this.reflectFromAbove=!0;var e,i,o,n,s=new THREE.PerspectiveCamera,r=new THREE.PerspectiveCamera,a=new THREE.PerspectiveCamera,c=new THREE.Vector3,h=new THREE.Quaternion,p=new THREE.Vector3;t.autoClear=!1,this.setSize=function(s,r){s<r?(e=s/2,i=s/2,o=0,n=(r-3*i)/2):(i=r/2,e=r/2,o=(s-3*e)/2,n=0),t.setSize(s,r)},this.render=function(t,e){this.cameraDistance=e.far/2,t.updateMatrixWorld(),this._setCameras(e),this._setScissors()},this._setCameras=function(t){null===t.parent&&t.updateMatrixWorld(),t.matrixWorld.decompose(c,h,p);var e=new THREE.Vector3(0,0,(-this.cameraDistance)).applyQuaternion(h).round().add(c),i=new THREE.Vector3((-this.cameraDistance),0,0).applyQuaternion(h).round().add(e),o=new THREE.Vector3(this.cameraDistance,0,0).applyQuaternion(h).round().add(e),n=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(1,0,0),Math.PI/2),u=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),Math.PI/2),_=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),-Math.PI/2),l=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,0,1),Math.PI),E=(new THREE.Quaternion).copy(h).multiply(n).multiply(u),d=(new THREE.Quaternion).copy(h).multiply(n).multiply(_);s.position.copy(c),this.reflectFromAbove?s.quaternion.copy(h.multiply(l)):s.quaternion.copy(h),s.far=t.far,a.position.copy(o),a.quaternion.copy(E),a.far=t.far,r.position.copy(i),r.quaternion.copy(d),r.far=t.far},this._setScissors=function(){t.clear(),t.setScissorTest(!0),this.reflectFromAbove?(t.setScissor(o+e,n+i,e,i),t.setViewport(o+e,n+i,e,i),t.render(scene,s),t.setScissor(o,n,e,i),t.setViewport(o,n,e,i),t.render(scene,a),t.setScissor(o+2*e,n,e,i),t.setViewport(o+2*e,n,e,i),t.render(scene,r)):(t.setScissor(o+i,n,e,i),t.setViewport(o+i,n,e,i),t.render(scene,s),t.setScissor(o,n+i,i,e),t.setViewport(o,n+i,i,e),t.render(scene,r),t.setScissor(o+i+e,n+i,i,e),t.setViewport(o+i+e,n+i,i,e),t.render(scene,a)),t.setScissorTest(!1)}},HOLO.Animator=function(){this._animations=[]},HOLO.Animator.prototype={constructor:HOLO.Animator,add:function(t){this._animations.push(t)},remove:function(t){var e=this._animations.indexOf(t);e>-1&&this._animations.splice(e,1)},animate:function(){for(var t=0;t<this._animations.length;t++)this._animations[t].animate(),this._animations[t].finished&&this.remove(this._animations[t])}},HOLO.ChangeColorAnimation=function(t,e,i){},HOLO.ChangeColorAnimation.prototype={constructor:HOLO.ChangeColorAnimation},HOLO.ChangeLocationAnimation=function(t,e,i){if(this._object=t,this._steps=i,e.constructor===Array)this._calcSteps(new THREE.Vector3(e[0],e[1],e[2]));else{if(!e.isVector3)throw new Error("Object is not an array or vector: ");this._calcSteps(e)}},HOLO.ChangeLocationAnimation.prototype={constructor:HOLO.ChangeLocationAnimation,get finished(){return this._steps<1},_calcSteps:function(t){this._changeX=(t.x-this._object.position.x)/this._steps,this._changeY=(t.y-this._object.position.y)/this._steps,this._changeZ=(t.z-this._object.position.z)/this._steps},_lerp:function(){this._object.position.x+=this._changeX,this._object.position.y+=this._changeY,this._object.position.z+=this._changeZ,this._steps-=1},animate:function(){this._lerp()}},HOLO.ChangeRotationAnimation=function(t,e,i){if(this._object=t,this._steps=i,e.constructor===Array)this._calcSteps(new THREE.Vector3(e[0],e[1],e[2]));else{if(!e.isVector3)throw new Error("Object is not an array or vector: ");this._calcSteps(e)}},HOLO.ChangeRotationAnimation.prototype={constructor:HOLO.ChangeRotationAnimation,get finished(){return this._steps<1},_calcSteps:function(t){this._changeX=(t.x-this._object.rotation.x)/this._steps,this._changeY=(t.y-this._object.rotation.y)/this._steps,this._changeZ=(t.z-this._object.rotation.z)/this._steps},_lerp:function(){this._object.rotation.x+=this._changeX,this._object.rotation.y+=this._changeY,this._object.rotation.z+=this._changeZ,this._steps-=1},animate:function(){this._lerp()}},HOLO.ChangeScaleAnimation=function(t,e,i){if(this._object=t,this._steps=i,e.constructor===Array)this._calcSteps(new THREE.Vector3(e[0],e[1],e[2]));else if(e.isVector3)this._calcSteps(e);else{if("number"!=typeof e)throw new Error("Object is not an array or vector: ");this._calcSteps(new THREE.Vector3(e,e,e))}},HOLO.ChangeScaleAnimation.prototype={constructor:HOLO.ChangeScaleAnimation,get finished(){return this._steps<1},_calcSteps:function(t){this._changeX=Math.pow(t.x,1/this._steps),this._changeY=Math.pow(t.y,1/this._steps),this._changeZ=Math.pow(t.z,1/this._steps)},_lerp:function(){this._object.scale.set(this._changeX,this._changeY,this._changeZ),this._steps-=1},animate:function(){this._lerp()}},HOLO.RotationAnimation=function(t,e,i){this._object=t,this._steps=1;var o;if(void 0!==e&&"number"!=typeof e)throw new Error("Alpha is not a float value.");if(o=e||1,i.constructor===Array)this._calcSteps(new THREE.Vector3(i[0],i[1],i[2]),o);else{if(!i.isVector3)throw new Error("Object is not an array or vector: ");this._calcSteps(i,o)}},HOLO.RotationAnimation.prototype={constructor:HOLO.RotationAnimation,get finished(){return this._steps<1},start:function(){this._steps=1},stop:function(){this._steps=0},_calcSteps:function(t,e){this._changeX=t.x*e,this._changeY=t.y*e,this._changeZ=t.z*e},_lerp:function(){this._object.rotation.x+=this._changeX,this._object.rotation.y+=this._changeY,this._object.rotation.z+=this._changeZ},animate:function(){this._lerp()}},HOLO.Cube=function(t,e,i,o,n,s){THREE.Group.call(this),this.type="Group",this._inside=[],this.autoScale=!0,this._width=t||200,this._height=e||200,this._depth=i||200,this._color=o||6750003,this._transparent=n||!0,this._oppacity=s||.5,this._cubeGeometry=new THREE.CubeGeometry(this._width,this._height,this._depth),this._cubeMaterials=[new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({color:this._color,transparent:this._transparent,opacity:this._oppacity,side:THREE.DoubleSide})],this._cubeFaceMaterial=new THREE.MeshFaceMaterial(this._cubeMaterials),this._cubeMesh=new THREE.Mesh(this._cubeGeometry,this._cubeFaceMaterial),this.add(this._cubeMesh),this._cubeGeometry.computeBoundingBox(),this.boundingBox=this._cubeGeometry.boundingBox},HOLO.Cube.prototype=Object.assign(Object.create(THREE.Group.prototype),{constructor:HOLO.Cube,addToCube:function(t){if(this.autoScale)if(this._fit(t),this._inside.push(t),this._inside.length>1){this.children=this.children.slice(0,1),this._computeSpacing();for(var e=0,i=0;i<this._inside.length;i++)this._inside[i].computeBoundingBox(),e+=this._inside[i].boundingBox.max.y;for(var o,n=this._objectSpace/e,s=+this.boundingBox.max.y/2,i=0;i<this._inside.length;i++)o=this._inside[i].clone(),e>this.boundingBox.max.y&&o.scale.set(n,n,n),o.position.set(0,s,0),this.add(o),o.computeBoundingBox(),s-=o.boundingBox.max.y+this._singleSpacing}else this.add(t);else this.add(t)},_fit:function(t){t.computeBoundingBox();var e;t.boundingBox.max.x>this.boundingBox.max.x&&(e=this.boundingBox.max.x/t.boundingBox.max.x,t.scale.set(e,e,e)),t.boundingBox.max.y>this.boundingBox.max.y&&(e=this.boundingBox.max.y/t.boundingBox.max.y,t.scale.set(e,e,e)),t.boundingBox.max.z>this.boundingBox.max.z&&(e=this.boundingBox.max.z/t.boundingBox.max.z,t.scale.set(e,e,e))},_computeSpacing:function(){this._totalSpacing=this.boundingBox.max.y/this._inside.length+1,this._singleSpacing=this._totalSpacing/this._inside.length-1,this._objectSpace=this.boundingBox.max.y-this._totalSpacing},set color(t){for(var e=0;e<this._cubeGeometry.faces.length;e++)this._cubeGeometry.faces[e].color=t;this._cubeGeometry.colorsNeedUpdate=!0},get color(){return new THREE.Color(this._color)}}),HOLO.Model=function(t,e){THREE.Mesh.call(this,t,e),this.type="Mesh"},HOLO.Model.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:HOLO.Model,computeBoundingBox:function(){this.geometry.computeBoundingBox(),this.boundingBox=this.geometry.boundingBox}}),HOLO.Text=function(t,e,i,o,n){this._font=t,this._text=e||"HoloJen",this._textSize=i||80,this._textHeight=o||20,this._curveSegments=n||2,this._textGeometry=new THREE.TextGeometry(this._text,{font:this._font,size:this._textSize,height:this._textHeight,curveSegments:this._curveSegments}),this._textGeometry.center(),this._textMaterial=new THREE.MultiMaterial([new THREE.MeshBasicMaterial({color:4873318,overdraw:.5}),new THREE.MeshBasicMaterial({color:16777215,overdraw:.5})]),THREE.Mesh.call(this,this._textGeometry,this._textMaterial),this.type="Mesh"},HOLO.Text.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:HOLO.Text,computeBoundingBox:function(){this._textGeometry.computeBoundingBox(),this.boundingBox=this._textGeometry.boundingBox},clone:function(){return new this.constructor(this._font,this._text).copy(this)}}),HOLO.ModelLoader=function(){},HOLO.ModelLoader.prototype={constructor:HOLO.ModelLoader};